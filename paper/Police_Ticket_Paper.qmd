---
title: "The Effects of COVID-19 on Police Issued Tickets"
subtitle: ""
author: 
  - Richard Guo
thanks: "The code and data supporting this analysis are available at: https://github.com/Richard-Guo1/Police_Issued_Tickets."
date: today
date-format: long
abstract: "To be included once analysis is completed"
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(knitr)

data <- read_csv(here::here("data/analysis_data/analysis_data.csv"))
spd_data <- 
  read.csv(here::here("data/analysis_data/speeding_by_district_and_year"))

```


# Introduction

The categories of tickets are Aggressive Driving, All Compulsory Automobile Insurance Act transgressions (All CAIA), Distracted Driving, Other Highway Traffic Act infractions (Other HTA), and speeding. 


# Data {#sec-mydatasection}


```{r}
#| label: tickets-by-year
#| fig-cap: Annual Number of Police Issued Tickets between 2014 and 2023
#| echo: false
  
data |> 
  ggplot(aes(x = `Offence Year`, weight = `Ticket Count`, 
             fill = `Offence Category`)) + 
  geom_bar() + labs(y = "Total Tickets") + 
  scale_x_continuous(breaks = c(2014:2023)) + guides(x = guide_axis(angle = 70))

```

Talk more about it.





# Discussion

## Identifying the Cause of Increased Speeding Tickets {#sec-first-point}
- major increase in speeding tickets between 2014-2019 and 2020-2023, aligns with covid lockdown restrictions 
- possible explanation is people sped more due to fewer cars on the roads and highways

```{r}
#| label: tbl-speeding
#| tbl-cap: Speeding Tickets In Districts 1-6 Sorted by Year
#| echo: false

kable(head(spd_data))

```
https://www.toronto.ca/services-payments/streets-parking-transportation/road-safety/vision-zero/safety-initiatives/speed-limit-reductions/https://www.toronto.ca/services-payments/streets-parking-transportation/road-safety/vision-zero/safety-initiatives/speed-limit-reductions/
- other possible explanation is lower speed limits means more speeding
- observations

## second discussion point
-map districts, ticket breakdown, year

```{r}
#| label: tickets-by-division
#| fig-cap: Police Issued Tickets for Speeding by Division in 2014-2023
#| echo: false
  
subset(data,data$`Offence Year` >= 2016) |> 
  ggplot(aes(x = Division, weight = `Ticket Count`, 
             fill = as.character(`Offence Year` >2019))) + 
  geom_bar(position = "dodge") + labs(y = "Speeding Tickets")

```


## Limitations
A significant portion of the data had to be thrown out as either the police division or district number had no specified address (NSA). 
\newpage

\appendix

# Appendix {-}


# Additional data details

```{r}
#| label: tbl-speeding
#| tbl-cap: Speeding Tickets In all Districts Sorted by Year
#| echo: false

kable(spd_data)

```

\newpage


# References


